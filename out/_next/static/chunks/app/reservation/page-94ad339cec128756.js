(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[639],{6454:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var s=r(5155),n=r(2115);function a(e){let{onSearch:t}=e,[r,a]=(0,n.useState)(""),[l,o]=(0,n.useState)("title");return(0,s.jsxs)("div",{className:"search-bar flex flex-col sm:flex-row items-stretch sm:items-center gap-4 mb-6 w-full",children:[(0,s.jsx)("input",{type:"text",className:"p-2 border border-gray-800 rounded w-full sm:w-auto flex-1",placeholder:"Mot-cl\xe9",value:r,onChange:e=>a(e.target.value)}),(0,s.jsxs)("select",{value:l,onChange:e=>o(e.target.value),className:"p-2 border border-gray-800 rounded w-full sm:w-auto",children:[(0,s.jsx)("option",{value:"title",children:"Titre"}),(0,s.jsx)("option",{value:"author",children:"Auteur"}),(0,s.jsx)("option",{value:"genre",children:"Genre"})]}),(0,s.jsx)("button",{onClick:()=>{t(r,l)},className:"bg-reservationButtonBg text-white py-2 px-4 rounded transform transition duration-300 ease-in-out hover:scale-105 hover:bg-survolButtonBg w-full sm:w-auto",children:"Rechercher"})]})}},7313:(e,t,r)=>{Promise.resolve().then(r.bind(r,8853))},8853:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});var s=r(5155),n=r(2115);function a(e){let{reservationId:t}=e,[r,a]=(0,n.useState)(!1),[l,o]=(0,n.useState)(!1),i=async()=>{a(!0);try{(await fetch("http://localhost:5000/api/reservations/id/".concat(t),{method:"DELETE"})).ok?(o(!0),alert("L'annulation a r\xe9ussi.")):alert("L'annulation a \xe9chou\xe9.")}catch(e){alert("Erreur de connexion, veuillez r\xe9essayer.")}finally{a(!1)}};return(0,s.jsx)("button",{onClick:i,disabled:r||l,className:"w-full sm:w-1/2 mt-2 py-2 px-4 rounded text-white ".concat(r?"bg-gray-500":"bg-red-500"," hover:scale-105 hover:bg-red-600 transition"),children:r?"Chargement...":l?"Annul\xe9":"Annuler"})}function l(e){let{reservations:t}=e;return t&&0!==t.length?(0,s.jsx)("div",{className:"grid gap-4 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3",children:t.map(e=>(0,s.jsxs)("div",{className:"border p-4 rounded shadow-md bg-white",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-2",children:e.book.title}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Auteur:"})," ",e.book.author]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Description:"})," ",e.book.description||"Pas de description disponible"]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Genre:"})," ",e.book.genre||"Genre non sp\xe9cifi\xe9"]}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)(a,{reservationId:e.id,userId:e.userId})})]},e.id))}):(0,s.jsx)("p",{children:"Aucune r\xe9servation trouv\xe9e."})}var o=r(6454);function i(){let[e,t]=(0,n.useState)([]),[r,a]=(0,n.useState)([]),[i,c]=(0,n.useState)(!0),d=async()=>{try{let e=localStorage.getItem("userId");if(!e)return void console.error("Aucun utilisateur connect\xe9 !");let r=await fetch("http://localhost:5000/api/reservations/id/".concat(e)),s=await r.json();s.error?(a([]),t([])):(a(s),t(s))}catch(e){console.error("Erreur lors de la r\xe9cup\xe9ration des r\xe9servations:",e)}finally{c(!1)}};return((0,n.useEffect)(()=>{d()},[]),i)?(0,s.jsx)("div",{className:"p-4",children:"Chargement..."}):(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between mb-6 gap-4",children:[(0,s.jsx)("h1",{className:"text-2xl md:text-3xl font-bold",children:"R\xe9servations"}),(0,s.jsx)(o.A,{onSearch:(e,s)=>{t(r.filter(t=>t.bookId[s].toLowerCase().includes(e.toLowerCase())))}})]}),0===e.length?(0,s.jsx)("p",{children:"Aucune r\xe9servation trouv\xe9e."}):(0,s.jsx)(l,{reservations:e})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(7313)),_N_E=e.O()}]);