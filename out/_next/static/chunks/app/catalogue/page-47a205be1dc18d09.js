(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[596],{697:(e,t,s)=>{"use strict";s.d(t,{default:()=>c});var r=s(5155),l=s(2115);function n(e){let{bookId:t,date:s}=e,[n,a]=(0,l.useState)(!1),[o,i]=(0,l.useState)(!1),d=localStorage.getItem("userId"),c=async()=>{if(!s||!d)return;let e=parseInt(d,10);if(!isNaN(e)){a(!0);try{(await fetch("http://localhost:5000/api/reservations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e,bookId:t,reservedUntil:s})})).ok?(i(!0),alert("R\xe9servation r\xe9ussie.")):alert("La r\xe9servation a \xe9chou\xe9.")}catch(e){alert("Erreur de connexion, veuillez r\xe9essayer.")}finally{a(!1)}}};return(0,r.jsx)("button",{onClick:c,disabled:n||o,className:"w-full sm:w-1/2 mt-2 py-2 px-4 rounded text-white ".concat(n?"bg-gray-500":"bg-reservationButtonBg"," hover:scale-105 hover:bg-survolButtonBg transition"),children:n?"Chargement...":o?"R\xe9serv\xe9":"Confirmer"})}function a(e){let{bookId:t,userId:s,onCancel:a}=e,[o,i]=(0,l.useState)("");return(0,r.jsxs)("div",{className:"bg-white p-6 rounded shadow-lg w-full max-w-sm",children:[(0,r.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Date retour"}),(0,r.jsx)("input",{type:"date",value:o,onChange:e=>i(e.target.value),className:"mb-4 p-2 border border-gray-300 rounded w-full"}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row justify-end gap-2",children:[(0,r.jsx)("button",{onClick:()=>{i(""),null==a||a()},className:"bg-red-500 text-white py-2 px-4 rounded hover:scale-105 hover:bg-orange-600 w-full sm:w-1/2 transition",children:"Annuler"}),o&&(0,r.jsx)(n,{bookId:t,userId:s,date:o})]})]})}function o(e){let{bookId:t,userId:s}=e,[n,o]=(0,l.useState)(!1);return(0,r.jsxs)("div",{children:[(0,r.jsx)("button",{onClick:()=>o(!0),className:"bg-reservationButtonBg text-white py-2 px-4 rounded transition hover:scale-105 hover:bg-survolButtonBg w-full sm:w-auto",children:"R\xe9server"}),n&&(0,r.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50 px-4",children:(0,r.jsx)(a,{bookId:t,userId:s,onCancel:()=>o(!1)})})]})}function i(e){let{books:t}=e;return t&&0!==t.length?(0,r.jsx)("div",{className:"grid gap-4 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3",children:t.map(e=>(0,r.jsxs)("div",{className:"border p-4 rounded shadow-md bg-white",children:[(0,r.jsx)("h2",{className:"text-xl font-bold mb-2",children:e.title}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Auteur:"})," ",e.author]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Description:"})," ",e.description||"Pas de description disponible"]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Genre:"})," ",e.genre||"Genre non sp\xe9cifi\xe9"]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Disponible:"})," ",e.isAvailable?"Oui":"Non"]}),(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsx)(o,{bookId:e.id,userId:1})})]},e.id))}):(0,r.jsx)("p",{children:"Aucun livre disponible."})}var d=s(6454);function c(){let[e,t]=(0,l.useState)([]),[s,n]=(0,l.useState)([]),a=async()=>{try{let e=await fetch("http://localhost:5000/api/books"),s=await e.json();t(s),n(s)}catch(e){console.error("Erreur lors de la r\xe9cup\xe9ration des livres:",e)}};return(0,l.useEffect)(()=>{a()},[]),(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between mb-6 gap-4",children:[(0,r.jsx)("h1",{className:"text-2xl md:text-3xl font-bold",children:"Catalogue"}),(0,r.jsx)(d.A,{onSearch:(t,s)=>{n(e.filter(e=>e[s].toLowerCase().includes(t.toLowerCase())))}})]}),(0,r.jsx)(i,{books:s})]})}},5773:(e,t,s)=>{Promise.resolve().then(s.bind(s,697)),Promise.resolve().then(s.t.bind(s,3063,23))},6454:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var r=s(5155),l=s(2115);function n(e){let{onSearch:t}=e,[s,n]=(0,l.useState)(""),[a,o]=(0,l.useState)("title");return(0,r.jsxs)("div",{className:"search-bar flex flex-col sm:flex-row items-stretch sm:items-center gap-4 mb-6 w-full",children:[(0,r.jsx)("input",{type:"text",className:"p-2 border border-gray-800 rounded w-full sm:w-auto flex-1",placeholder:"Mot-cl\xe9",value:s,onChange:e=>n(e.target.value)}),(0,r.jsxs)("select",{value:a,onChange:e=>o(e.target.value),className:"p-2 border border-gray-800 rounded w-full sm:w-auto",children:[(0,r.jsx)("option",{value:"title",children:"Titre"}),(0,r.jsx)("option",{value:"author",children:"Auteur"}),(0,r.jsx)("option",{value:"genre",children:"Genre"})]}),(0,r.jsx)("button",{onClick:()=>{t(s,a)},className:"bg-reservationButtonBg text-white py-2 px-4 rounded transform transition duration-300 ease-in-out hover:scale-105 hover:bg-survolButtonBg w-full sm:w-auto",children:"Rechercher"})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[63,441,684,358],()=>t(5773)),_N_E=e.O()}]);